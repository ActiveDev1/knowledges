**تسکین درد: اعمال اتوماسیون در راه‌اندازی کلاسترها**

ده سال پیش، تیم SRE زیرساخت کلاستر تقریباً هر چند ماه یک‌بار نیروی جدید استخدام می‌کرد. به‌طور اتفاقی، این تقریباً همان بازه زمانی بود که ما یک کلاستر جدید راه‌اندازی می‌کردیم. از آنجا که راه‌اندازی یک سرویس در یک کلاستر جدید به کارمند جدید امکان آشنایی با جزئیات داخلی سرویس را می‌داد، این وظیفه به‌عنوان یک ابزار آموزشی طبیعی و مفید به نظر می‌رسید.

مراحل آماده‌سازی یک کلاستر برای استفاده تقریباً به این شکل بود:
1. آماده‌سازی ساختمان دیتاسنتر برای تأمین برق و خنک‌سازی.
2. نصب و پیکربندی سوئیچ‌های اصلی و اتصالات به backbone.
3. نصب چند رک اولیه از سرورها.
4. پیکربندی سرویس‌های پایه مانند DNS و نصب‌کننده‌ها، سپس پیکربندی سرویس قفل (lock service)، ذخیره‌سازی، و محاسبات.
5. استقرار بقیه رک‌های ماشین‌ها.
6. تخصیص منابع به سرویس‌های رو به کاربر، تا تیم‌هایشان بتوانند سرویس‌ها را راه‌اندازی کنند.

مراحل 4 و 6 بسیار پیچیده بودند. در حالی که سرویس‌های پایه مانند DNS نسبتاً ساده هستند، زیرسیستم‌های ذخیره‌سازی و محاسبات در آن زمان هنوز در حال توسعه سنگین بودند، به‌طوری که پرچم‌ها (flags)، اجزا، و بهینه‌سازی‌های جدید به‌صورت هفتگی اضافه می‌شدند.

برخی سرویس‌ها بیش از صد زیرسیستم مختلف داشتند، هر کدام با شبکه‌ای پیچیده از وابستگی‌ها. عدم پیکربندی یک زیرسیستم یا پیکربندی متفاوت یک سیستم یا جزء نسبت به سایر استقرارها، می‌توانست به قطعی تأثیرگذار بر مشتری منجر شود.

در یک مورد، یک کلاستر چند پتابایتی Bigtable به‌گونه‌ای پیکربندی شده بود که به دلایل تأخیر، از دیسک اول (دیسک لاگ) در سیستم‌های 12 دیسکی استفاده نکند. یک سال بعد، برخی اتوماسیون فرض کرد که اگر دیسک اول یک ماشین استفاده نشود، آن ماشین هیچ ذخیره‌سازی پیکربندی‌شده‌ای ندارد؛ بنابراین، پاک کردن ماشین و راه‌اندازی مجدد آن از ابتدا بی‌خطر است. در نتیجه، تمام داده‌های Bigtable به‌صورت آنی پاک شدند. خوشبختانه چندین replica بلادرنگ از مجموعه داده داشتیم، اما چنین شگفتی‌هایی خوشایند نیستند. اتوماسیون باید در مورد تکیه بر سیگنال‌های ضمنی «ایمنی» محتاط باشد.

اتوماسیون اولیه بر تسریع تحویل کلاستر متمرکز بود. این رویکرد معمولاً به استفاده خلاقانه از SSH برای مشکلات توزیع بسته‌های خسته‌کننده و راه‌اندازی اولیه سرویس‌ها وابسته بود. این استراتژی...