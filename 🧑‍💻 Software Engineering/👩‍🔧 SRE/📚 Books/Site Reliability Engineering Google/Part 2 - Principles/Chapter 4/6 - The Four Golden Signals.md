**چهار سیگنال طلایی**

چهار سیگنال طلایی مانیتورینگ عبارت‌اند از: **latency (تأخیر)**، **traffic (ترافیک)**، **errors (خطاها)** و **saturation (اشباع)**. اگر تنها بتوانید چهار معیار از سیستم کاربرمحور خود را اندازه‌گیری کنید، روی این چهار مورد تمرکز کنید.

- **Latency (تأخیر)**:
  - زمان لازم برای پردازش یک درخواست. مهم است که بین **تأخیر درخواست‌های موفق** و **تأخیر درخواست‌های ناموفق** تمایز قائل شوید. 
  - **مثال**: یک خطای HTTP 500 به دلیل قطع اتصال به پایگاه داده ممکن است خیلی سریع برگردد، اما چون نشان‌دهنده درخواست ناموفق است، گنجاندن آن در محاسبات کلی تأخیر می‌تواند گمراه‌کننده باشد. با این حال، یک خطای کند بدتر از خطای سریع است! بنابراین، باید **تأخیر خطاها** را جداگانه رصد کنید و نه فقط خطاها را فیلتر کنید.

- **Traffic (ترافیک)**:
  - معیاری از میزان تقاضا بر سیستم، که با یک معیار سطح بالا و خاص سیستم اندازه‌گیری می‌شود.
  - **مثال**: برای یک سرویس وب، معمولاً تعداد درخواست‌های HTTP در ثانیه است (ممکن است به نوع درخواست‌ها، مثل محتوای استاتیک یا داینامیک، تفکیک شود). برای یک سیستم استریمینگ صوتی، ممکن است نرخ I/O شبکه یا تعداد جلسات همزمان باشد. برای یک سیستم ذخیره‌سازی کلید-مقدار، ممکن است تراکنش‌ها و بازیابی‌ها در ثانیه باشد.

- **Errors (خطاها)**:
  - نرخ درخواست‌هایی که شکست می‌خورند، چه به‌صورت **صریح** (مثل HTTP 500)، **ضمنی** (مثل پاسخ HTTP 200 اما با محتوای نادرست)، یا **بر اساس سیاست** (مثلاً اگر متعهد به پاسخ در یک ثانیه هستید، هر درخواستی بیش از یک ثانیه خطاست).
  - **نکته**: در مواردی که کدهای پاسخ پروتکل (مثل HTTP) برای بیان همه حالت‌های شکست کافی نیستند، پروتکل‌های داخلی ثانویه برای رصد حالت‌های شکست جزئی لازم است. شناسایی خطاها می‌تواند بسیار متفاوت باشد: گرفتن HTTP 500 در **load balancer** می‌تواند شکست‌های کامل را تشخیص دهد، اما فقط تست‌های **end-to-end** می‌توانند محتوای نادرست را شناسایی کنند.

- **Saturation (اشباع)**:
  - میزان "پر بودن" سرویس شما. معیاری از ظرفیت سیستم، با تأکید بر منابع محدود شده (مثلاً حافظه در سیستم‌های محدود شده توسط حافظه، یا I/O در سیستم‌های محدود شده توسط I/O).
  - **نکته**: بسیاری از سیستم‌ها قبل از رسیدن به 100% استفاده، عملکردشان افت می‌کند، بنابراین داشتن یک هدف استفاده (utilization target) ضروری است.
  - در سیستم‌های پیچیده، اشباع می‌تواند با معیارهای سطح بالاتر بار تکمیل شود: آیا سرویس شما می‌تواند دو برابر ترافیک، 10% ترافیک بیشتر، یا حتی ترافیک کمتری را مدیریت کند؟ 
  - برای سرویس‌های ساده بدون پارامترهای متغیر (مثل Give me a nonce or I need a globally unique monotonic integer)، یک مقدار ثابت از تست بار ممکن است کافی باشد. اما اکثر سرویس‌ها باید از سیگنال‌های غیرمستقیم مثل استفاده از CPU یا پهنای باند شبکه با حد بالای مشخص استفاده کنند.
  - **نشانه زودهنگام**: افزایش تأخیر اغلب نشانه اولیه اشباع است. اندازه‌گیری **99th percentile** زمان پاسخ در یک بازه کوچک (مثلاً یک دقیقه) می‌تواند هشدار زودهنگام اشباع را بدهد.
  - **پیش‌بینی**: اشباع همچنین به پیش‌بینی مشکلات قریب‌الوقوع مربوط است، مثل «به نظر می‌رسد دیسک پایگاه داده شما در 4 ساعت پر شود.»

### نتیجه‌گیری
اگر هر چهار سیگنال طلایی را اندازه‌گیری کنید و در صورت مشکل‌دار بودن یکی از آن‌ها (یا نزدیک به مشکل در مورد اشباع) یک انسان را **پیج** کنید، سرویس شما حداقل به‌صورت مناسبی تحت پوشش مانیتورینگ قرار خواهد گرفت.