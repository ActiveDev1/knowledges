**به حداکثر رساندن سرعت تغییرات بدون نقض SLO سرویس‌ها**

تیم‌های توسعه محصول و SRE می‌توانند با حذف تعارض ساختاری در اهدافشان، رابطه کاری مؤثری داشته باشند. این تعارض بین سرعت نوآوری و پایداری محصول است که اغلب به‌صورت غیرمستقیم بروز می‌کند. در SRE، این تعارض را به‌صراحت مطرح کرده و با معرفی **error budget** آن را حل می‌کنیم.

۱. **Error budget** از این مشاهده ناشی می‌شود که 100% **reliability** برای تقریباً همه سیستم‌ها هدف درستی نیست (به‌جز موارد استثنایی مثل pacemaker یا ترمز ABS). کاربران تفاوت بین 100% و 99.999% **availability** را متوجه نمی‌شوند، زیرا سیستم‌های دیگر (مثل لپ‌تاپ، WiFi خانگی، ISP، یا شبکه برق) معمولاً کمتر از 99.999% در دسترس هستند. بنابراین، تلاش برای رسیدن به 0.001% اضافی **availability** در نویز سایر قطعی‌ها گم می‌شود و برای کاربر ارزشی ندارد.

**سؤال اصلی**: هدف **reliability** مناسب برای یک سیستم چیست؟ این یک سؤال فنی نیست، بلکه یک سؤال مرتبط با محصول است که به عوامل زیر بستگی دارد:

- کاربران با چه سطحی از **availability** راضی هستند؟
- چه گزینه‌های جایگزینی برای کاربران ناراضی وجود دارد؟
- رفتار کاربران در سطوح مختلف **availability** چگونه تغییر می‌کند؟

تیم کسب‌وکار یا محصول باید هدف **availability** سیستم را تعیین کند. **Error budget** برابر است با یک منهای هدف **availability**. مثلاً، سرویسی با 99.99% **availability**، 0.01% **unavailability** مجاز دارد که همان **error budget** است. ما می‌توانیم این بودجه را هر طور که بخواهیم خرج کنیم، به شرطی که از آن تجاوز نکنیم.

**چگونه error budget را خرج کنیم؟** تیم توسعه می‌خواهد ویژگی‌های جدید را سریع لانچ کند و کاربران جدید جذب کند. در حالت ایده‌آل، کل **error budget** صرف ریسک‌های مربوط به لانچ‌های سریع می‌شود. این اصل اساسی مدل **error budget** است. با استفاده از روش‌هایی مثل **phased rollouts** یا **1% experiments**، می‌توان **error budget** را آزاد کرد تا لانچ‌ها سریع‌تر انجام شوند.

استفاده از **error budget** تعارض انگیزه بین توسعه و SRE را رفع می‌کند. هدف SRE دیگر "صفر outage" نیست؛ بلکه SRE و توسعه‌دهندگان با هم تلاش می‌کنند تا با صرف **error budget**، به حداکثر **feature velocity** برسند. در این مدل، **outage** دیگر یک چیز "بد" نیست، بلکه بخشی طبیعی از فرآیند نوآوری است.


---------------------

**SLO چیست؟**

هدف سطح سرویس **(SLO یا Service Level Objective)** یک معیار مشخص و قابل اندازه‌گیری است که سطح عملکرد یا کیفیت مورد انتظار یک سرویس را تعریف می‌کند. این معیار معمولاً به صورت کمی (عددی) بیان می‌شود و نشان‌دهنده سطح **reliability**، **availability**، **latency** یا سایر جنبه‌های کلیدی سرویس است که برای کاربران و کسب‌وکار مهم هستند. SLO بخشی از **SLA** (Service Level Agreement) است، اما بر اهداف داخلی و مهندسی تمرکز دارد، نه تعهدات قانونی یا قراردادها.

عناوین SLOها برای تیم‌های SRE و توسعه‌دهندگان به‌عنوان راهنمایی برای طراحی، مدیریت و بهینه‌سازی سرویس‌ها عمل می‌کنند. آن‌ها همچنین به تعریف **error budget** (بودجه خطا) کمک می‌کنند، که نشان‌دهنده میزان مجاز خرابی یا نقض SLO است.

### ویژگی‌های SLO:

- **قابل اندازه‌گیری**: باید بتوان آن را با **metrics** (مثل درصد یا میلی‌ثانیه) اندازه گرفت.
- **واقع‌بینانه**: باید با نیازهای کاربران و محدودیت‌های فنی هم‌خوانی داشته باشد.
- **مرتبط با تجربه کاربر**: باید نشان‌دهنده چیزی باشد که برای کاربر اهمیت دارد (مثل سرعت یا دسترسی).
- **زمان‌دار**: معمولاً در یک بازه زمانی خاص (مثل یک ماه یا فصل) تعریف می‌شود.

### مثال‌های SLO:

1. **SLO برای Availability**:
    - **سرویس**: یک وب‌سایت مثل Google Search.
    - **SLO**: 99.9% **availability** در یک بازه فصلی (سه‌ماهه).
    - **معنی**: وب‌سایت باید در 99.9% مواقع در دسترس باشد. این یعنی حداکثر 43.2 دقیقه **downtime** (قطعی) در یک فصل مجاز است.
    - **کاربرد**: اگر **outage** رخ دهد و از این حد بیشتر شود، تیم SRE باید اقدامات اصلاحی انجام دهد (مثل بهبود سیستم یا کاهش سرعت لانچ ویژگی‌های جدید).
  
2. **SLO برای Latency**:
    - **سرویس**: یک API جست‌وجو (مثل API داخلی برای نمایش نتایج جست‌وجو).
	- **SLO**: 95% درخواست‌ها باید در کمتر از 200 میلی‌ثانیه پاسخ داده شوند.
    - **معنی**: حداقل 95% درخواست‌ها باید سریع (زیر 200 میلی‌ثانیه) باشند تا تجربه کاربری خوبی ارائه شود.
    - **کاربرد**: اگر درصد درخواست‌های کند افزایش یابد، تیم باید **performance** سیستم را بررسی کند (مثل بهینه‌سازی کد یا افزایش منابع).
  
3. **SLO برای Request Success Rate**:
    - **سرویس**: یک سیستم پرداخت آنلاین.
    - **SLO**: 99.99% **request success rate** در یک بازه روزانه.
    - **معنی**: از هر 10,000 تراکنش، حداکثر 1 تراکنش می‌تواند ناموفق باشد (مثلاً به دلیل خطای سرور).
    - **کاربرد**: اگر تعداد خطاها از این حد بیشتر شود، تیم باید **root cause** را پیدا کند (مثل باگ در کد یا مشکل در دیتابیس).
  
### ارتباط SLO با Error Budget:

- **Error budget** از SLO به‌دست می‌آید. مثلاً، اگر SLO یک سرویس 99.9% **availability** باشد، **error budget** برابر با 0.1% **unavailability** است.
- این بودجه مشخص می‌کند که تیم تا چه حد می‌تواند ریسک کند (مثلاً برای لانچ ویژگی‌های جدید یا آزمایش‌ها).

**مثال ساده Error Budget**:
- فرض کنید یک سرویس با SLO 99.9% **availability** در یک ماه (تقریباً 43,200 دقیقه) کار می‌کند.
- **Error budget**: 0.1% از 43,200 دقیقه = 43.2 دقیقه **downtime** مجاز.
- اگر سرویس در ماه 50 دقیقه قطعی داشته باشد، از **error budget** فراتر رفته و تیم باید مشکلات را تحلیل و رفع کند.