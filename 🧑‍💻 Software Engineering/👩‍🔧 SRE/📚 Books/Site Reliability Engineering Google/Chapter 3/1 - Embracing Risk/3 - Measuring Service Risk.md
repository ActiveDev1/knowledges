در گوگل، برای بهینه‌سازی ویژگی‌های یک سیستم، معمولاً یک **metric** عینی تعریف می‌کنیم. این metric به ما کمک می‌کند تا عملکرد فعلی را ارزیابی کرده و پیشرفت یا افت عملکرد را در طول زمان ردیابی کنیم. برای **service risk**، تبدیل همه عوامل به یک metric واحد چالش‌برانگیز است، زیرا خرابی سرویس می‌تواند باعث نارضایتی کاربران، کاهش اعتماد، زیان مالی، آسیب به برند یا پوشش رسانه‌ای منفی شود. برای ساده‌سازی، ما روی **unplanned downtime** تمرکز می‌کنیم.

۱. Unplanned downtime معمولاً با سطح availability مورد انتظار سرویس تعریف می‌شود که به‌صورت درصد (مثل 99.9%، 99.99% یا 99.999%) یا تعداد "9" بیان می‌شود. هر "9" اضافه نشان‌دهنده بهبود ده برابری در دسترسی به 100% است. برای سیستم‌های serving، این metric معمولاً با فرمول time-based availability محاسبه می‌شود:
![[time-based-availability.png]]
- ۲. **Time-based availability**: نسبت زمان uptime سیستم در یک بازه زمانی (مثلاً یک سال). مثلاً، سیستمی با هدف 99.99% availability می‌تواند حداکثر 52.56 دقیقه در سال downtime داشته باشد و همچنان در هدف خود بماند.


اما در گوگل، چون سرویس‌ها به‌صورت جهانی توزیع‌شده‌اند و **fault isolation** تضمین می‌کند که همیشه بخشی از ترافیک سرویس فعال است، time-based metric کمتر معنادار است. به‌جای آن، ما **availability** را بر اساس **request success rate** تعریف می‌کنیم:

- ۳. **Aggregate availability**: نسبت درخواست‌های موفق به کل درخواست‌ها در یک بازه زمانی (مثلاً یک روز). مثلاً، سیستمی با 2.5 میلیون درخواست در روز و هدف 99.99% availability، می‌تواند تا 250 خطا داشته باشد و همچنان در هدف خود بماند.


همه درخواست‌ها یکسان نیستند (مثلاً، خطا در sign-up کاربر جدید مهم‌تر از خطا در polling ایمیل است). اما در بسیاری موارد، request success rate برای همه درخواست‌ها تقریبی معقول از unplanned downtime از دیدگاه کاربر است.

این روش برای سیستم‌های غیر-serving (مثل batch، pipeline، storage یا transactional systems) هم کاربرد دارد، زیرا این سیستم‌ها نیز مفهوم مشخصی از کارهای موفق و ناموفق دارند. مثلاً، یک batch process که داده‌ها را از دیتابیس مشتری استخراج، تبدیل و به data warehouse وارد می‌کند، می‌تواند با محاسبه success rate رکوردها، یک metric availability مفید داشته باشد.

ما معمولاً اهداف **availability** را به‌صورت فصلی تعیین کرده و عملکرد را به‌صورت هفتگی یا روزانه ردیابی می‌کنیم. این رویکرد به ما امکان می‌دهد انحرافات مهم را شناسایی، ردیابی و رفع کنیم. برای جزئیات بیشتر، به **Service Level Objectives** مراجعه کنید.